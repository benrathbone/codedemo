

## Code Demo: Meal Planner

This is a bare-bones project to show a custom module example and demonstrate several Drupal 8 concepts and features. 

> This is in no way intended to be a complete site, ready for public use. It is intended purely for development purposes
and to demonstrate specific concepts. 


Basic Use Case:
-You are planning an event and you have to plan X many 3-course meals for X many people. Each course can have X many 
options. You also need to easily and dynamically see the aggregate totals per meal option.  
-i.e. You are planning an event where you will provide a 3-course breakfast, lunch, and dinner for 500 people 
for 5 days.  
-For each meal, and admin needs to be able to select a subset of options for each course.  

Demo instructions:

-Clone the repo.  
-Note that a copy of the database is in the /db directory  
-Import the database and configure your site settings.  


-Log in as a regular user. **u: customer1  p: drupal123**  
-Click the 'Your Meals' tab.  
-For each meal click the link to place an order or edit an order.  
-Log out when done.  


-Log in as an admin user. **u: admin  p: drupal123**  
-Note you can add to any of the options for any of the courses via Taxonomy vocabularies
  at /admin/structure/taxonomy  
-Go to the Content View (/admin/content) and note you can edit any existing meals by editing any of the 
existing Meal nodes.  
-Use the 'Customer Order Admin' tab to edit individual orders for individual users.  
-Use the 'Totals' tab to view total counts of each item ordered.  



### Concepts Demonstrated:

**Custom Module**  
 *see: /docroot/modules/custom/codedemo_orders*  
 Mostly generated by Drupal console
 
 **Custom Entity**  
 *see: /docroot/modules/custom/codedemo_orders/src/Entity/OrderEntity.php*  
 Scaffolding generated by Drupal console. Fields set in UI.  
 The individual Meals and options are created and edited as standard Nodes. The individual orders, for a Meal,
 for a user, are saved as custom entity items (Order Entity). Entity reference fields associate each Order Entity
 with a Meal and a User. 
 
 **Form Mode & Entity Form Override**  
 *see: /docroot/modules/custom/codedemo_orders/codedemo_orders.module*  
 see: /docroot/modules/custom/codedemo_orders/src/Form/CustomerOrderEntityForm.php  
 Custom Display set in Admin. Allows for a specific form to be presented to authenticated users with a subset of 
 fields (set by admin.)

 **Custom Route & Controller**  
 *see: /docroot/modules/custom/codedemo_orders/codedemo_orders.routing.yml*  
 *see: /docroot/modules/custom/codedemo_orders/src/Controller/OrderController.php*  
 A custom controller to generate a form to present to a user, modified to reflect the meal options saved by
 an admin. Also allows orders to be edited. 
 
 **Custom View Field Plugin**  
 *see: /docroot/modules/custom/codedemo_orders/src/Plugin/views/field/CustomerOrderViewsField.php*  
 A basic view field plugin to add to table to let user know which Meals have been edited. 

